<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.rowell.sifa.mapper.endcorrect.DeathMapper">
	<resultMap id="BaseResultMap" type="com.rowell.sifa.pojo.endcorrect.Death">
		<id column="ID" jdbcType="VARCHAR" property="id" />
		<result column="DEATHL_TIME" jdbcType="TIMESTAMP" property="deathlTime" />
		<result column="DEATH_REASON" jdbcType="CLOB" property="deathReason" />
		<result column="SITUATION" jdbcType="CLOB" property="situation" />
		<result column="PATH" jdbcType="VARCHAR" property="path" />
		<result column="PATH_NAME" jdbcType="VARCHAR" property="pathName" />
		<result column="CULPRIT_ID" jdbcType="VARCHAR" property="culpritId" />
		<result column="WRIT_NUM" jdbcType="VARCHAR" property="writNum" />
		<result column="CREATED" jdbcType="TIMESTAMP" property="created" />
		<result column="CREATER" jdbcType="VARCHAR" property="creater" />
		<result column="UPDATED" jdbcType="TIMESTAMP" property="updated" />
		<result column="UPDATER" jdbcType="VARCHAR" property="updater" />
		<result column="DEL_FLAG" jdbcType="DECIMAL" property="delFlag" />
		<result column="PROCESS_INSTANCE_ID" jdbcType="VARCHAR"
			property="processInstanceId" />
		<result column="GROUP_NAME" jdbcType="VARCHAR" property="groupName" />
		<result column="GROUP_ID" jdbcType="VARCHAR" property="groupId" />
		<result column="CULPRIT_NAME" jdbcType="VARCHAR" property="culpritName" />
		<result column="IS_PRINTONE" jdbcType="DECIMAL" property="isPrintONE" />
		<result column="IS_PRINTTWO" jdbcType="DECIMAL" property="isPrintTWO" />
	</resultMap>
	<sql id="Base_Column_List">
		t.ID, t.DEATHL_TIME, t.DEATH_REASON, t.SITUATION, t.PATH, t.PATH_NAME,
		t.CULPRIT_ID, t.WRIT_NUM,
		t.CREATED, t.CREATER, t.UPDATED, t.UPDATER,
		t.DEL_FLAG,PROCESS_INSTANCE_ID,t.IS_PRINTONE,t.IS_PRINTTWO
	</sql>
	<select id="selectByPrimaryKey" parameterType="java.lang.String"
		resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		,c.name as "culprit_name", g.id as "group_id", g.name as "group_name"
		from SF_DEATH t
		left join sf_culprit c on c.id = t.culprit_id
		left join sys_group g on g.id = c.group_id
		where t.ID = #{id,jdbcType=VARCHAR}
	</select>
	<delete id="deleteByPrimaryKey" parameterType="java.lang.String">
		delete from SF_DEATH
		where ID = #{id,jdbcType=VARCHAR}
	</delete>
	<insert id="insert" parameterType="com.rowell.sifa.pojo.endcorrect.Death">
		insert into SF_DEATH (ID, DEATHL_TIME, H_REASON,
		SITUATION, PATH, PATH_NAME,
		CULPRIT_ID, WRIT_NUM, CREATED,
		CREATER, UPDATED, UPDATER,
		DEL_FLAG,PROCESS_INSTANCE_ID)
		values (#{id,jdbcType=VARCHAR}, #{deathlTime,jdbcType=TIMESTAMP},
		#{deathReason,jdbcType=CLOB},
		#{situation,jdbcType=CLOB}, #{path,jdbcType=VARCHAR}, #{pathName,jdbcType=VARCHAR},
		#{culpritId,jdbcType=VARCHAR}, #{writNum,jdbcType=VARCHAR},
		#{created,jdbcType=TIMESTAMP},
		#{creater,jdbcType=VARCHAR}, #{updated,jdbcType=TIMESTAMP}, #{updater,jdbcType=VARCHAR},
		#{delFlag,jdbcType=DECIMAL},#{processInstanceId,jdbcType=VARCHAR})
	</insert>
	<insert id="insertSelective" parameterType="com.rowell.sifa.pojo.endcorrect.Death">
		insert into SF_DEATH
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				ID,
			</if>
			<if test="deathlTime != null">
				DEATHL_TIME,
			</if>
			<if test="deathReason != null">
				DEATH_REASON,
			</if>
			<if test="situation != null">
				SITUATION,
			</if>
			<if test="path != null">
				PATH,
			</if>
			<if test="pathName != null">
				PATH_NAME,
			</if>
			<if test="culpritId != null">
				CULPRIT_ID,
			</if>
			<if test="writNum != null">
				WRIT_NUM,
			</if>
			<if test="created != null">
				CREATED,
			</if>
			<if test="creater != null">
				CREATER,
			</if>
			<if test="updated != null">
				UPDATED,
			</if>
			<if test="updater != null">
				UPDATER,
			</if>
			<if test="delFlag != null">
				DEL_FLAG,
			</if>
			<if test="processInstanceId != null">
				PROCESS_INSTANCE_ID,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id,jdbcType=VARCHAR},
			</if>
			<if test="deathlTime != null">
				#{deathlTime,jdbcType=TIMESTAMP},
			</if>
			<if test="deathReason != null">
				#{deathReason,jdbcType=CLOB},
			</if>
			<if test="situation != null">
				#{situation,jdbcType=CLOB},
			</if>
			<if test="path != null">
				#{path,jdbcType=VARCHAR},
			</if>
			<if test="pathName != null">
				#{pathName,jdbcType=VARCHAR},
			</if>
			<if test="culpritId != null">
				#{culpritId,jdbcType=VARCHAR},
			</if>
			<if test="writNum != null">
				#{writNum,jdbcType=VARCHAR},
			</if>
			<if test="created != null">
				#{created,jdbcType=TIMESTAMP},
			</if>
			<if test="creater != null">
				#{creater,jdbcType=VARCHAR},
			</if>
			<if test="updated != null">
				#{updated,jdbcType=TIMESTAMP},
			</if>
			<if test="updater != null">
				#{updater,jdbcType=VARCHAR},
			</if>
			<if test="delFlag != null">
				#{delFlag,jdbcType=DECIMAL},
			</if>
			<if test="processInstanceId != null">
				#{processInstanceId,jdbcType=VARCHAR},
			</if>
		</trim>
	</insert>
	<update id="updateByPrimaryKeySelective" parameterType="com.rowell.sifa.pojo.endcorrect.Death">
		update SF_DEATH
		<set>
			<if test="deathlTime != null">
				DEATHL_TIME = #{deathlTime,jdbcType=TIMESTAMP},
			</if>
			<if test="deathReason != null">
				DEATH_REASON = #{deathReason,jdbcType=CLOB},
			</if>
			<if test="situation != null">
				SITUATION = #{situation,jdbcType=CLOB},
			</if>
			<if test="path != null">
				PATH = #{path,jdbcType=VARCHAR},
			</if>
			<if test="pathName != null">
				PATH_NAME = #{pathName,jdbcType=VARCHAR},
			</if>
			<if test="culpritId != null">
				CULPRIT_ID = #{culpritId,jdbcType=VARCHAR},
			</if>
			<if test="writNum != null">
				WRIT_NUM = #{writNum,jdbcType=VARCHAR},
			</if>
			<if test="created != null">
				CREATED = #{created,jdbcType=TIMESTAMP},
			</if>
			<if test="creater != null">
				CREATER = #{creater,jdbcType=VARCHAR},
			</if>
			<if test="updated != null">
				UPDATED = #{updated,jdbcType=TIMESTAMP},
			</if>
			<if test="updater != null">
				UPDATER = #{updater,jdbcType=VARCHAR},
			</if>
			<if test="delFlag != null">
				DEL_FLAG = #{delFlag,jdbcType=DECIMAL},
			</if>
			<if test="isPrintONE != null">
				IS_PRINTONE=#{isPrintONE,jdbcType=DECIMAL},
			</if>
			<if test="isPrintTWO != null">
				IS_PRINTTWO=#{isPrintTWO,jdbcType=DECIMAL},
			</if>
			<if test="processInstanceId != null">
				PROCESS_INSTANCE_ID = #{processInstanceId,jdbcType=VARCHAR}
			</if>

			
		</set>
		where ID = #{id,jdbcType=VARCHAR}
	</update>
	<update id="updateByPrimaryKey" parameterType="com.rowell.sifa.pojo.endcorrect.Death">
		update SF_DEATH
		set DEATHL_TIME = #{deathlTime,jdbcType=TIMESTAMP},
		DEATH_REASON = #{deathReason,jdbcType=CLOB},
		SITUATION = #{situation,jdbcType=CLOB},
		PATH = #{path,jdbcType=VARCHAR},
		PATH_NAME = #{pathName,jdbcType=VARCHAR},
		CULPRIT_ID = #{culpritId,jdbcType=VARCHAR},
		WRIT_NUM = #{writNum,jdbcType=VARCHAR},
		CREATED = #{created,jdbcType=TIMESTAMP},
		CREATER = #{creater,jdbcType=VARCHAR},
		UPDATED = #{updated,jdbcType=TIMESTAMP},
		UPDATER = #{updater,jdbcType=VARCHAR},
		DEL_FLAG = #{delFlag,jdbcType=DECIMAL},
		PROCESS_INSTANCE_ID = #{processInstanceId,jdbcType=VARCHAR},
		 IS_PRINTONE=#{isPrintONE,jdbcType=DECIMAL},
    	  IS_PRINTTWO=#{isPrintTWO,jdbcType=DECIMAL}
		where ID = #{id,jdbcType=VARCHAR}
	</update>
	<select id="selectAll" parameterType="com.rowell.sifa.pojo.endcorrect.Death"
		resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		,c.name as "culprit_name", g.id as "group_id", g.name as "group_name"
		from SF_DEATH t
		left join sf_culprit c on c.id = t.culprit_id
		left join sys_group g on g.id = c.group_id
		<where>
			<include refid="findAllWhere" />
		</where>

		<if test="orderStr!=null">
      <![CDATA[
           order by  ${orderStr}
      ]]>
		</if>
	</select>
	<select id="getCount" parameterType="com.rowell.sifa.pojo.endcorrect.Death"
		resultType="int">
		select count(*)
		from SF_DEATH t
		left join sf_culprit c on c.id = t.culprit_id
		left join sys_group g on g.id = c.group_id
		<where>
			<include refid="findAllWhere" />
		</where>
	</select>
	<sql id="findAllWhere">
		<if test="groupName != null and groupName != ''">
			AND g.name = #{groupName,jdbcType=VARCHAR}
		</if>
		<if test="culpritName != null and culpritName != ''">
			AND c.name like '%'||#{culpritName,jdbcType=VARCHAR}||'%'
		</if>

		<if test="deathlTime != null">
			AND t.DEATHL_TIME = #{deathlTime,jdbcType=TIMESTAMP}
		</if>
		<if test="deathReason != null and deathReason!=''">
			AND t.DEATH_REASON = #{deathReason,jdbcType=CLOB}
		</if>
		<if test="situation != null and situation!=''">
			AND t.SITUATION = #{situation,jdbcType=CLOB}
		</if>
		<if test="path != null and path!=''">
			AND t.PATH = #{path,jdbcType=VARCHAR}
		</if>
		<if test="pathName != null and pathName!=''">
			AND t.PATH_NAME = #{pathName,jdbcType=VARCHAR}
		</if>
		<if test="culpritId != null and culpritId!=''">
			AND t.CULPRIT_ID = #{culpritId,jdbcType=VARCHAR}
		</if>
		<if test="writNum != null and writNum!=''">
			AND t.t.WRIT_NUM = #{writNum,jdbcType=VARCHAR}
		</if>
		<if test="created != null">
			AND t.CREATED = #{created,jdbcType=TIMESTAMP}
		</if>
		<if test="creater != null and creater!=''">
			AND t.CREATER = #{creater,jdbcType=VARCHAR}
		</if>
		<if test="updated != null">
			AND t.UPDATED = #{updated,jdbcType=TIMESTAMP}
		</if>
		<if test="updater != null and updater!=''">
			AND t.UPDATER = #{updater,jdbcType=VARCHAR}
		</if>
		<if test="delFlag != null">
			AND t.DEL_FLAG = #{delFlag,jdbcType=DECIMAL}
		</if>
		<if test="deathReason != null and deathReason!=''">
			AND t.DEATH_REASON = #{deathReason,jdbcType=CLOB}
		</if>
		<if test="searchStartDate != null">
    <![CDATA[ 
      AND t.CREATED >= #{searchStartDate,jdbcType=TIMESTAMP}
       ]]>
		</if>

		<if test="searchEndDate != null">
    	 <![CDATA[  
      AND t.CREATED < #{searchEndDate,jdbcType=TIMESTAMP}
       ]]>
		</if>
		<if test="groupId != null and groupId !=''">
			AND exists ( select t2.id from (select * from sys_group start with id=
			#{groupId,jdbcType=VARCHAR} connect by prior id = parent_id) t2 where
			t2.id=c.group_id)
		</if>
	</sql>
</mapper>