<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.rowell.sifa.mapper.endcorrect.DetachedMapper">
  <resultMap id="BaseResultMap" type="com.rowell.sifa.pojo.endcorrect.Detached">
    <id column="ID" jdbcType="VARCHAR" property="id" />
    <result column="CULPRIT_ID" jdbcType="VARCHAR" property="culpritId" />
    <result column="DIC_GRASP_TYPE_KEY" jdbcType="VARCHAR" property="dicGraspTypeKey" />
    <result column="GRASP_TIME" jdbcType="TIMESTAMP" property="graspTime" />
    <result column="REPORT_TIME" jdbcType="TIMESTAMP" property="reportTime" />
    <result column="REPORT_PERSON" jdbcType="VARCHAR" property="reportPerson" />
    <result column="POLICE_NAME" jdbcType="VARCHAR" property="policeName" />
    <result column="REPORT_UNIT" jdbcType="VARCHAR" property="reportUnit" />
    <result column="DETACHED_TIME" jdbcType="TIMESTAMP" property="detachedTime" />
    <result column="DESCRIPTION" jdbcType="VARCHAR" property="description" />
    <result column="CREATED" jdbcType="TIMESTAMP" property="created" />
    <result column="CREATER" jdbcType="VARCHAR" property="creater" />
    <result column="UPDATED" jdbcType="TIMESTAMP" property="updated" />
    <result column="UPDATER" jdbcType="VARCHAR" property="updater" />
    <result column="DEL_FLAG" jdbcType="DECIMAL" property="delFlag" />
    <result column="CULPRIT_NAME" jdbcType="VARCHAR" property="culpritName" />
    <result column="GROUP_NAME" jdbcType="VARCHAR" property="groupName" />
    <result column="PROCESS_INSTANCE_ID" jdbcType="VARCHAR" property="processInstanceId" />
    <result column="ADJUDGE_PERIOD" jdbcType="VARCHAR" property="adjudgePeriod" />
    <result column="ADJUDGE_CHANGE" jdbcType="VARCHAR" property="adjudgeChange" />
    <result column="ADJUDGE_STARTTIME" jdbcType="TIMESTAMP" property="adjudgeStartTime" />
    <result column="ADJUDGE_ENDTIME" jdbcType="TIMESTAMP" property="adjudgeEndTime" />
    <result column="DIC_PENAL_TYPE_KEY" jdbcType="VARCHAR" property="dicPenalTypeKey" />
    <result column="REDRESS_START_DATE" jdbcType="TIMESTAMP" property="redressStartDate" />
    <result column="REDRESS_END_DATE" jdbcType="TIMESTAMP" property="redressEndDate" />
  </resultMap>
  <sql id="Base_Column_List">
    t.ID, t.CULPRIT_ID, t.DIC_GRASP_TYPE_KEY, t.GRASP_TIME, t.REPORT_TIME, t.REPORT_PERSON, t.POLICE_NAME, 
    t.REPORT_UNIT, t.DETACHED_TIME, t.DESCRIPTION, t.CREATED, t.CREATER, t.UPDATED, t.UPDATER, t.DEL_FLAG,PROCESS_INSTANCE_ID
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />,t2.name as culprit_name,t3.name as group_name
    from SF_DETACHED t left join SF_CULPRIT t2 on (t.CULPRIT_ID=t2.id) left join sys_group t3 on (t2.group_id=t3.id)
    where t.ID = #{id,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    delete from SF_DETACHED t
    where t.ID = #{id,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.rowell.sifa.pojo.endcorrect.Detached">
    insert into SF_DETACHED t (ID, CULPRIT_ID, DIC_GRASP_TYPE_KEY, 
      GRASP_TIME, REPORT_TIME, REPORT_PERSON, 
      POLICE_NAME, REPORT_UNIT, DETACHED_TIME, 
      DESCRIPTION, CREATED, CREATER, 
      UPDATED, UPDATER, DEL_FLAG,PROCESS_INSTANCE_ID
      )
    values (#{id,jdbcType=VARCHAR}, #{culpritId,jdbcType=VARCHAR}, #{dicGraspTypeKey,jdbcType=VARCHAR}, 
      #{graspTime,jdbcType=TIMESTAMP}, #{reportTime,jdbcType=TIMESTAMP}, #{reportPerson,jdbcType=VARCHAR}, 
      #{policeName,jdbcType=VARCHAR}, #{reportUnit,jdbcType=VARCHAR}, #{detachedTime,jdbcType=TIMESTAMP}, 
      #{description,jdbcType=VARCHAR}, #{created,jdbcType=TIMESTAMP}, #{creater,jdbcType=VARCHAR}, 
      #{updated,jdbcType=TIMESTAMP}, #{updater,jdbcType=VARCHAR}, #{delFlag,jdbcType=DECIMAL},
      #{processInstanceId,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.rowell.sifa.pojo.endcorrect.Detached">
    insert into SF_DETACHED t
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        ID,
      </if>
      <if test="culpritId != null">
        CULPRIT_ID,
      </if>
      <if test="dicGraspTypeKey != null">
        DIC_GRASP_TYPE_KEY,
      </if>
      <if test="graspTime != null">
        GRASP_TIME,
      </if>
      <if test="reportTime != null">
        REPORT_TIME,
      </if>
      <if test="reportPerson != null">
        REPORT_PERSON,
      </if>
      <if test="policeName != null">
        POLICE_NAME,
      </if>
      <if test="reportUnit != null">
        REPORT_UNIT,
      </if>
      <if test="detachedTime != null">
        DETACHED_TIME,
      </if>
      <if test="description != null">
        DESCRIPTION,
      </if>
      <if test="created != null">
        CREATED,
      </if>
      <if test="creater != null">
        CREATER,
      </if>
      <if test="updated != null">
        UPDATED,
      </if>
      <if test="updater != null">
        UPDATER,
      </if>
      <if test="delFlag != null">
        DEL_FLAG,
      </if>
      <if test="processInstanceId != null">
        PROCESS_INSTANCE_ID,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=VARCHAR},
      </if>
      <if test="culpritId != null">
        #{culpritId,jdbcType=VARCHAR},
      </if>
      <if test="dicGraspTypeKey != null">
        #{dicGraspTypeKey,jdbcType=VARCHAR},
      </if>
      <if test="graspTime != null">
        #{graspTime,jdbcType=TIMESTAMP},
      </if>
      <if test="reportTime != null">
        #{reportTime,jdbcType=TIMESTAMP},
      </if>
      <if test="reportPerson != null">
        #{reportPerson,jdbcType=VARCHAR},
      </if>
      <if test="policeName != null">
        #{policeName,jdbcType=VARCHAR},
      </if>
      <if test="reportUnit != null">
        #{reportUnit,jdbcType=VARCHAR},
      </if>
      <if test="detachedTime != null">
        #{detachedTime,jdbcType=TIMESTAMP},
      </if>
      <if test="description != null">
        #{description,jdbcType=VARCHAR},
      </if>
      <if test="created != null">
        #{created,jdbcType=TIMESTAMP},
      </if>
      <if test="creater != null">
        #{creater,jdbcType=VARCHAR},
      </if>
      <if test="updated != null">
        #{updated,jdbcType=TIMESTAMP},
      </if>
      <if test="updater != null">
        #{updater,jdbcType=VARCHAR},
      </if>
      <if test="delFlag != null">
        #{delFlag,jdbcType=DECIMAL},
      </if>
      <if test="processInstanceId != null">
        #{processInstanceId,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  
  <update id="updateByPrimaryKeySelective" parameterType="com.rowell.sifa.pojo.endcorrect.Detached">
    update SF_DETACHED t
    <set>
      <if test="culpritId != null">
        CULPRIT_ID = #{culpritId,jdbcType=VARCHAR},
      </if>
      <if test="dicGraspTypeKey != null">
        DIC_GRASP_TYPE_KEY = #{dicGraspTypeKey,jdbcType=VARCHAR},
      </if>
      <if test="graspTime != null">
        GRASP_TIME = #{graspTime,jdbcType=TIMESTAMP},
      </if>
      <if test="reportTime != null">
        REPORT_TIME = #{reportTime,jdbcType=TIMESTAMP},
      </if>
      <if test="reportPerson != null">
        REPORT_PERSON = #{reportPerson,jdbcType=VARCHAR},
      </if>
      <if test="policeName != null">
        POLICE_NAME = #{policeName,jdbcType=VARCHAR},
      </if>
      <if test="reportUnit != null">
        REPORT_UNIT = #{reportUnit,jdbcType=VARCHAR},
      </if>
      <if test="detachedTime != null">
        DETACHED_TIME = #{detachedTime,jdbcType=TIMESTAMP},
      </if>
      <if test="description != null">
        DESCRIPTION = #{description,jdbcType=VARCHAR},
      </if>
      <if test="created != null">
        CREATED = #{created,jdbcType=TIMESTAMP},
      </if>
      <if test="creater != null">
        CREATER = #{creater,jdbcType=VARCHAR},
      </if>
      <if test="updated != null">
        UPDATED = #{updated,jdbcType=TIMESTAMP},
      </if>
      <if test="updater != null">
        UPDATER = #{updater,jdbcType=VARCHAR},
      </if>
      <if test="delFlag != null">
        DEL_FLAG = #{delFlag,jdbcType=DECIMAL},
      </if>
      <if test="processInstanceId != null">
        PROCESS_INSTANCE_ID = #{processInstanceId,jdbcType=VARCHAR},
      </if>
    </set>
    where ID = #{id,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.rowell.sifa.pojo.endcorrect.Detached">
    update SF_DETACHED t
    set CULPRIT_ID = #{culpritId,jdbcType=VARCHAR},
      DIC_GRASP_TYPE_KEY = #{dicGraspTypeKey,jdbcType=VARCHAR},
      GRASP_TIME = #{graspTime,jdbcType=TIMESTAMP},
      REPORT_TIME = #{reportTime,jdbcType=TIMESTAMP},
      REPORT_PERSON = #{reportPerson,jdbcType=VARCHAR},
      POLICE_NAME = #{policeName,jdbcType=VARCHAR},
      REPORT_UNIT = #{reportUnit,jdbcType=VARCHAR},
      DETACHED_TIME = #{detachedTime,jdbcType=TIMESTAMP},
      DESCRIPTION = #{description,jdbcType=VARCHAR},
      CREATED = #{created,jdbcType=TIMESTAMP},
      CREATER = #{creater,jdbcType=VARCHAR},
      UPDATED = #{updated,jdbcType=TIMESTAMP},
      UPDATER = #{updater,jdbcType=VARCHAR},
      DEL_FLAG = #{delFlag,jdbcType=DECIMAL},
      PROCESS_INSTANCE_ID = #{processInstanceId,jdbcType=VARCHAR}
    where ID = #{id,jdbcType=VARCHAR}
  </update>
  <select id="selectAll" parameterType="com.rowell.sifa.pojo.endcorrect.Detached" resultMap="BaseResultMap">
    select 
   <include refid="Base_Column_List" />
   ,t2.name as culprit_name,t2.REDRESS_START_DATE as redressStartDate,t2.REDRESS_END_DATE as redressEndDate,
   	t3.name as group_name,t4.ADJUDGE_PERIOD as adjudgePeriod,t4.ADJUDGE_CHANGE as adjudgeChange,
   	t4.ADJUDGE_STARTTIME as adjudgeStartTime,t4.ADJUDGE_ENDTIME as adjudgeEndTime,t4.DIC_PENAL_TYPE_KEY as dicPenalTypeKey  
    from SF_DETACHED t left join SF_CULPRIT t2 on (t.CULPRIT_ID=t2.id) left join sys_group t3 on (t2.group_id=t3.id)
    left join SF_CULPRIT_JUDGMENT t4 on (t.CULPRIT_ID=t4.CULPRIT_ID)
    <where>
      <include refid="findAllWhere" />
    </where>
    <if test="orderStr!=null">
      <![CDATA[
           order by  ${orderStr}
      ]]>
    </if>
  </select>
  <sql id="findAllWhere">
  	<if test="culprit!=null and culprit.name != null and culprit.name!=''">
      AND t2.NAME  like '%'|| #{culprit.name,jdbcType=VARCHAR} ||'%'
    </if>
    <if test="groupId != null and groupId!=''">
     	 <![CDATA[  
     	 AND  exists ( select t4.id from (select * from sys_group  start with id= #{groupId,jdbcType=VARCHAR} connect by prior id = parent_id) t4 where t2.group_id=t4.id)
       ]]>  
    </if>
     <!-- <if test="sysGroup!=null and sysGroup.id != null and sysGroup.id!=''">
      AND t2.GROUP_ID = #{sysGroup.id,jdbcType=VARCHAR}
    </if> -->

    <if test="culpritId != null and culpritId!=''">
      AND t.CULPRIT_ID = #{culpritId,jdbcType=VARCHAR}
    </if>
    <if test="dicGraspTypeKey != null and dicGraspTypeKey!=''">
      AND t.DIC_GRASP_TYPE_KEY = #{dicGraspTypeKey,jdbcType=VARCHAR}
    </if>
    <if test="graspTime != null and graspTime != ''">
      AND t.GRASP_TIME = #{graspTime,jdbcType=TIMESTAMP}
    </if>
     <if test="graspTimeStart != null and graspTimeStart != ''">
       <![CDATA[AND t.GRASP_TIME >= #{graspTimeStart,jdbcType=TIMESTAMP}]]>
    </if>
    <if test="graspTimeEnd != null and graspTimeEnd != ''">
       <![CDATA[AND t.GRASP_TIME <= #{graspTimeEnd,jdbcType=TIMESTAMP}]]>
    </if>
    <if test="reportTime != null and reportTime != ''">
      AND t.REPORT_TIME = #{reportTime,jdbcType=TIMESTAMP}
    </if>
    <if test="reportTimeStart != null and reportTimeStart != ''">
       <![CDATA[AND t.REPORT_TIME >= #{reportTimeStart,jdbcType=TIMESTAMP}]]>
    </if>
    <if test="reportTimeEnd != null and reportTimeEnd != ''">
       <![CDATA[AND t.REPORT_TIME <= #{reportTimeEnd,jdbcType=TIMESTAMP}]]>
    </if>
    <if test="reportPerson != null and reportPerson!=''">
      AND t.REPORT_PERSON = #{reportPerson,jdbcType=VARCHAR}
    </if>
    <if test="policeName != null and policeName!=''">
      AND t.POLICE_NAME = #{policeName,jdbcType=VARCHAR}
    </if>
    <if test="reportUnit != null and reportUnit!=''">
      AND t.REPORT_UNIT = #{reportUnit,jdbcType=VARCHAR}
    </if>
    <if test="detachedTime != null and detachedTime != ''">
      AND t.DETACHED_TIME = #{detachedTime,jdbcType=TIMESTAMP}
    </if>
     <if test="detachedTimeStart != null and detachedTimeStart != ''">
       <![CDATA[AND t.DETACHED_TIME >= #{detachedTimeStart,jdbcType=TIMESTAMP}]]>
    </if>
    <if test="detachedTimeEnd != null and detachedTimeEnd != ''">
       <![CDATA[AND t.DETACHED_TIME <= #{detachedTimeEnd,jdbcType=TIMESTAMP}]]>
    </if>
    <if test="description != null and description!=''">
      AND t.DESCRIPTION = #{description,jdbcType=VARCHAR}
    </if>
    <if test="created != null and created != ''">
      AND t.CREATED = #{created,jdbcType=TIMESTAMP}
    </if>
    <!-- <if test="startCreateDate != null and startCreateDate != ''">
       <![CDATA[AND t.DETACHED_TIME >= #{startCreateDate,jdbcType=TIMESTAMP}]]>
    </if>
    <if test="endCreateDate != null and endCreateDate != ''">
       <![CDATA[AND t.DETACHED_TIME <= #{endCreateDate,jdbcType=TIMESTAMP}]]>
    </if> -->
    <if test="creater != null and creater!=''">
      AND t.CREATER = #{creater,jdbcType=VARCHAR}
    </if>
    <if test="updated != null and updated != ''">
      AND t.UPDATED = #{updated,jdbcType=TIMESTAMP}
    </if>
    <if test="updater != null and updater!=''">
      AND t.UPDATER = #{updater,jdbcType=VARCHAR}
    </if>
    <if test="delFlag != null and delFlag != ''">
      AND t.DEL_FLAG = #{delFlag,jdbcType=DECIMAL}
    </if>
    <if test="processInstanceId != null and processInstanceId!=''">
      AND PROCESS_INSTANCE_ID = #{processInstanceId,jdbcType=VARCHAR}
    </if>
  </sql>
</mapper>